{% load i18n %}
{% load humanize %}
<p>
    <span class="block font-semibold">
        {% blocktrans trimmed with link="https://last.fm/user/theconjuring666" span_class="block font-semibold" %}
            Latest track from <a href="{{ link }}">Last.fm</a>:
        {% endblocktrans %}
    </span>
    <span class="block">
        <img src="{{ last_played.image_url }}"
             width="16"
             height="16"
             class="inline-block"
             alt="Cover image for {{ last_played.artist }} - {{ last_played.title }}"
             onerror="this.style.display='none'; this.onerror=null;" />
        <a href="{{ last_played.lastfm_url }}"
           target="_blank"
           rel="noopener noreferrer">{{ last_played.artist }} - {{ last_played.title }}</a>
    </span>
    <span class="block text-gray-11 dark:text-gray-dark-11">
        {% if not last_played.now_playing %}
            {% blocktrans trimmed with time=last_played.scrobbled_at|naturaltime %}
                scrobbled {{ time }}
            {% endblocktrans %}
        {% else %}
            <svg class="inline-block"
                 width="16"
                 height="16"
                 viewBox="0 0 100 100"
                 xmlns="http://www.w3.org/2000/svg"
                 fill="currentColor"
                 stroke="currentColor"
                 stroke-width="1.5"
                 style="transform: scaleY(-1)">
                <rect x="15" y="20" width="20" height="60" rx="10" ry="10">
                <animate attributeName="height" values="10;30;35;40;60;20;30;10" dur="1s" repeatCount="indefinite"></animate>
                </rect>
                <rect x="45" y="20" width="20" height="60" rx="10" ry="10">
                <animate attributeName="height" values="15;40;20;40;20;60;40;20;40;15" dur="1.2s" repeatCount="indefinite"></animate>
                </rect>
                <rect x="75" y="20" width="20" height="60" rx="10" ry="10">
                <animate attributeName="height" values="20;60;30;35;40;35;40;10;60;35;40;35;20" dur="1.5s" repeatCount="indefinite"></animate>
                </rect>
            </svg>
            <span>{% trans "listening now" %}</span>
        {% endif %}
    </span>
</p>
